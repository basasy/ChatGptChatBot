@Html.Partial("/Views/Particials/MessageBoxLeft.cshtml")
@Html.Partial("/Views/Particials/MessageBoxRight.cshtml")
<main class="content">
	<div class="container">

		<h1 class="h3 mb-3">NumBot</h1>

		<div class="card">
			<div class="row">
				<div class="col-12 col-lg-5 col-xl-3 border-right" style="overflow-y: scroll">
					<a href="\document\Semih Yilmaz 2023.pdf" target="_blank" class="list-group-item list-group-item-action border-0">
						@*<div class="badge bg-success float-right">1</div>*@
						<div class="d-flex align-items-start">
							<img src="\img\semihyilmaz.jfif" class="rounded-circle mr-1" alt="Vanessa Tucker" width="40" height="40">
							<div class="flex-grow-1 ml-3">
								Semih Yilmaz
								<div class="small"><span class="fas fa-circle chat-online"></span> Okunmamış mesajlar var</div>
							</div>
						</div>
					</a>
					<a href="https://www.linkedin.com/in/semih-yilmazzz/" target="_blank" class="list-group-item list-group-item-action border-0">
						
						<div class="d-flex align-items-start">
							<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/c/ca/LinkedIn_logo_initials.png/800px-LinkedIn_logo_initials.png" class="rounded-circle mr-1" alt="Vanessa Tucker" width="40" height="40">
							<div class="flex-grow-1 ml-3">
								Linkedin
								<div class="small"><span class="fas fa-circle chat-online"></span> Okunmamış mesajlar var</div>
							</div>
						</div>
					</a>
					<a href="https://medium.com/%40semih4333" target="_blank" class="list-group-item list-group-item-action border-0">
						@*<div class="badge bg-success float-right">3</div>*@
						<div class="d-flex align-items-start">
							<img src="https://cdn.mos.cms.futurecdn.net/xJGh6cXvC69an86AdrLD98.jpg" class="rounded-circle mr-1" alt="Vanessa Tucker" width="40" height="40">
							<div class="flex-grow-1 ml-3">
								Medium
								<div class="small"><span class="fas fa-circle chat-online"></span> Okunmamış mesajlar var</div>
							</div>
						</div>
					</a>
					<a href="https://github.com/basasy" target="_blank" class="list-group-item list-group-item-action border-0">
						
						<div class="d-flex align-items-start">
							<img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" class="rounded-circle mr-1" alt="Vanessa Tucker" width="40" height="40">
							<div class="flex-grow-1 ml-3">
								GitHub
								<div class="small"><span class="fas fa-circle chat-online"></span> Okunmamış mesajlar var</div>
							</div>
						</div>
					</a>
					<a href="\document\NumBot Geliştirme Dokümanı.pdf" target="_blank" class="list-group-item list-group-item-action border-0">

						<div class="d-flex align-items-start">
							<img src="https://cdn-icons-png.flaticon.com/512/6747/6747196.png" class="rounded-circle mr-1" alt="Vanessa Tucker" width="40" height="40">
							<div class="flex-grow-1 ml-3">
								Geliştirme Dokümanı
								<div class="small"><span class="fas fa-circle chat-online"></span> Okunmamış mesajlar var</div>
							</div>
						</div>
					</a>
					<hr class="d-block d-lg-none mt-1 mb-0">
				</div>
				<div class="col-12 col-lg-7 col-xl-9">
					<div class="py-2 px-4 border-bottom d-none d-lg-block">
						<div class="d-flex align-items-center py-1">
							<div class="position-relative">
								<img src="https://numbots.com/wp-content/uploads/2018/11/cropped-Numbots-1.png" class="rounded-circle mr-1" alt="Sharon Lessman" width="60" height="60">
							</div>
							<div class="flex-grow-1 pl-3">
								<strong>NumBot</strong>
								<p class="text-muted small">Ben chatGpt 3.5 tabanlı bir sohbet botuyum</p>
								<div class="text-muted small"><em id="typeing">Online</em></div>
							</div>
							
						</div>
					</div>

					<div class="position-relative  chat-box">
						<div id="messagelist" class="chat-messages p-4">

						</div>
					</div>
					<div class="flex-grow-0 border-top">
						<div class="input-group">
							<input id="message" type="text" class="form-control" placeholder="Type your message">
							<button class="btn btn-primary" id="myBtn" onclick="postMessage()" onfocus="this.value = ''">Gönder</button>
						</div>
					</div>

				</div>
			</div>
		</div>
	</div>
</main>
<script>

	
    function addMessageRight()
    {
		var newDiv = document.getElementById("chatrigth").outerHTML;
		//var newDiv = document.getElementById("chatleft").outerHTML;
		newDiv = newDiv.replace("d-none", "");
		//var newDiv = '<div class="chat-message-right pb-4"><div> <img src="https://bootdey.com/img/Content/avatar/avatar1.png" class="rounded-circle mr-1" alt = "Chris Wood" width = "40" height = "40"><div class="text-muted small text-nowrap mt-2"> 2: 33 am </div></div><div class="flex-shrink-1 bg-light rounded py-2 px-3 mr-3"><divclass="font-weight-bold mb-1">You</div>Lorem ipsum dolor sit amet, vis erat denique in, dicunt prodesset te vix.</div></div>';
		
		console.log(newDiv);
		var div = document.getElementById("messagelist");
		div.innerHTML += newDiv;
    }
	function addMessageLeft() {
		//var newDiv = document.getElementById("chatrigth").outerHTML;
		var newDiv = document.getElementById("chatleft").outerHTML;
		newDiv = newDiv.replace("d-none", "");
		//var newDiv = '<div class="chat-message-right pb-4"><div> <img src="https://bootdey.com/img/Content/avatar/avatar1.png" class="rounded-circle mr-1" alt = "Chris Wood" width = "40" height = "40"><div class="text-muted small text-nowrap mt-2"> 2: 33 am </div></div><div class="flex-shrink-1 bg-light rounded py-2 px-3 mr-3"><divclass="font-weight-bold mb-1">You</div>Lorem ipsum dolor sit amet, vis erat denique in, dicunt prodesset te vix.</div></div>';

		console.log(newDiv);
		var div = document.getElementById("messagelist");
		div.innerHTML += newDiv;
	}

	function postMessage() {
		var userText = $('#message').val();
		console.log(userText);
		document.getElementById("message").value = "";
		
		if(userText != "")
		{
			document.getElementById("typeing").textContent = "Yazıyor..."
			console.log(userText);
			var inputText = { UserText: userText };
			console.log(inputText);
			//var outputElement = document.getElementById('output');
			var senderMessage = document.getElementById('messagetextsender');
			senderMessage.textContent = userText;
			addMessageRight();
			$.ajax({
				type: "POST",
				url: '/home/GetResponse',
				dataType: 'json',
				contentType: 'application/json; charset=utf-8',
				// data: { Id:id },
				data: JSON.stringify(inputText),
				success: function (data) {
					if (data) {
						//alert("Başarılıı");
						console.log(data.outPut);

						var receiveMessage = document.getElementById('messagetextreceive');
						receiveMessage.textContent = data.outPut;
						addMessageLeft();
						document.getElementById("typeing").textContent = "Online"
					}
					else
					{
						alert("hata");
					}


				},
				error: function (err) {
					console.log(err);
					alert(err);
				}
			});
		}
		
	}

</script>
